# LinkedIn Posts MCP - AI News Generator

A Python application that fetches the latest AI news and generates professional bilingual LinkedIn posts using OpenAI's API with the Model Completion Protocol (MCP).

## Features

- üîç Fetches latest AI news using MCP (Model Context Protocol) server
- ü§ñ Generates professional bilingual LinkedIn posts (English & Spanish)
- üìù Uses OpenAI's GPT-4 with custom MCP prompts
- üíæ Outputs results to console and JSON file
- üîß Configurable via environment variables
- üîÑ Intelligent fallback to OpenAI-based news search if MCP server unavailable

## Installation

1. Clone or download this repository
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

3. Set up environment variables:
   ```bash
   cp env.example .env
   ```
   
   Edit `.env` and add your API keys:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   MCP_SERVER_PATH=mcp-server-news  # Optional
   LINKEDIN_CLIENT_ID=your_linkedin_client_id_here  # Required for posting
   LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret_here  # Required for posting
   LINKEDIN_REDIRECT_URI=http://localhost:8080/callback  # OAuth callback
   LINKEDIN_ACCESS_TOKEN=your_linkedin_access_token_here  # Generated by auth script
   LINKEDIN_COMPANY_ID=your_linkedin_company_id_here  # Required for posting
   ```

## Usage

### Option 1: Generate Post Only
```bash
python linkedin_mcp.py
```

### Option 2: Generate and Post to LinkedIn
```bash
python post_to_linkedin.py
```

### Option 3: Post Existing JSON File
```bash
python linkedin_poster.py
```

### Option 4: Generate LinkedIn Access Token
```bash
python linkedin_auth.py
```

The scripts will:
1. Search for the latest AI news using MCP server (or OpenAI fallback)
2. Generate a bilingual LinkedIn post using OpenAI
3. Display the results in the console
4. Save the post to `linkedin_post.json`
5. (Optional) Post directly to your LinkedIn company page

## API Keys

### Required
- **OpenAI API Key**: Get yours from [OpenAI Platform](https://platform.openai.com/api-keys)

### Required for LinkedIn Posting
- **LinkedIn Client ID**: Get yours from [LinkedIn Developer Portal](https://developer.linkedin.com/)
- **LinkedIn Client Secret**: Get yours from [LinkedIn Developer Portal](https://developer.linkedin.com/)
- **LinkedIn Company ID**: Your company page ID (found in your LinkedIn company page URL)

### Optional
- **MCP Server Path**: Path to your MCP news server executable (defaults to `mcp-server-news`)

## Output Format

The generated LinkedIn post will be saved in `linkedin_post.json` with the following structure:

```json
{
  "title": "Post Title",
  "post_body_en": "English version of the LinkedIn post...",
  "post_body_es": "Spanish version of the LinkedIn post...",
  "link": "https://original-article-url.com"
}
```

## News Sources

The application searches for news using:
1. **MCP Server** (if available) - Uses Model Context Protocol for news search
2. **OpenAI Fallback** - Uses GPT-4 to search and summarize recent AI news

## MCP Protocol

This application implements a custom Model Completion Protocol (MCP) for communicating with OpenAI. The MCP prompt is designed to:
- Generate professional, company-branded content
- Create localized Spanish translations (not literal)
- Maintain appropriate tone and length constraints
- Include relevant hashtags and links

## Error Handling

The application includes robust error handling for:
- Missing API keys
- Network connectivity issues
- Invalid JSON responses
- Empty news results

## LinkedIn API Setup

To enable direct posting to LinkedIn, you need to:

1. **Create a LinkedIn App**:
   - Go to [LinkedIn Developer Portal](https://developer.linkedin.com/)
   - Create a new app
   - Request access to "Share on LinkedIn" and "Read company pages" products
   - Note down your Client ID and Client Secret

2. **Configure OAuth Settings**:
   - Add `http://localhost:8080/callback` as a redirect URI in your LinkedIn app settings
   - Add your Client ID and Client Secret to your `.env` file

3. **Generate Access Token**:
   - Run: `python linkedin_auth.py`
   - This will open a browser for LinkedIn authorization
   - Follow the OAuth flow to generate an access token
   - The token will be automatically saved to your `.env` file

4. **Get Your Company ID**:
   - Go to your LinkedIn company page
   - The ID is in the URL: `linkedin.com/company/[COMPANY_ID]/`
   - Add it to your `.env` file

## Requirements

- Python 3.7+
- Internet connection
- Valid OpenAI API key
- LinkedIn API credentials (for posting functionality)
- Optional MCP news server for enhanced news fetching

## License

This project is open source and available under the MIT License.
